<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Never-Ending Elevator — Chill Simulator</title>
<style>
  html,body{margin:0;padding:0;height:100%;background:#0b0f12;color:#e6eef6;font-family:sans-serif;overflow:hidden;}
  .app{display:flex;height:100vh;}
  .panel{width:330px;background:linear-gradient(180deg,#0f1720,#0b0f12);padding:16px;box-sizing:border-box;}
  .panel .title{font-weight:700;margin-bottom:12px;}
  .btn{width:100%;padding:10px;margin-bottom:8px;border:none;border-radius:8px;background:#0284c7;color:white;cursor:pointer;font-weight:700;}
  .btn:hover{background:#0ea5a3;}
  .status,.direction{font-size:14px;color:#94a3b8;margin-bottom:8px;}
  .big{font-size:32px;font-weight:800;margin-bottom:12px;text-align:center;}
  .shaft{flex:1;position:relative;background:linear-gradient(180deg,#091123,#05060a);}
  .elevator{position:absolute;left:50%;transform:translateX(-50%);width:260px;height:200px;border-radius:10px;background:linear-gradient(180deg,#0b1220,#0f1725);box-shadow:0 12px 40px rgba(2,6,23,.6);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;overflow:hidden;}
  .doors{width:100%;height:40%;display:flex;margin-top:10px;}
  .door{flex:1;margin:6px;background:linear-gradient(180deg,#081021,#0c1420);border-radius:6px;}
  .window{position:absolute;top:40px;left:10px;right:10px;bottom:10px;border-radius:8px;overflow:hidden;}
  canvas{width:100%;height:100%;display:block;}
</style>
</head>
<body>
<div class="app">
  <div class="panel">
    <div class="title">Never-Ending Elevator — Chill Simulator</div>
    <div class="status">Floor: <span id="floorLabel">Surface</span></div>
    <div class="big" id="currentFloor">0</div>
    <button class="btn" id="btnUp">Go Up</button>
    <button class="btn" id="btnDown">Go Down</button>
    <button class="btn" id="btnRandom">Generative</button>
    <button class="btn" id="btnStop">Stop</button>
    <button class="btn" id="btnMusic">Play Lofi</button>
    <div class="direction" id="dirLabel">Direction: Idle</div>
  </div>
  <div class="shaft">
    <div class="elevator" id="elevator">
      <div class="doors">
        <div class="door"></div>
        <div class="door"></div>
      </div>
      <div class="window">
        <canvas id="viewCanvas"></canvas>
      </div>
    </div>
  </div>
</div>

<div id="player-anchor" style="display:none;"></div>

<script>
let direction=0; // -1 down, 0 idle, +1 up
let generative=false;
let floor=0;
let floorLabel=document.getElementById('floorLabel');
let currentFloor=document.getElementById('currentFloor');
let dirLabel=document.getElementById('dirLabel');
let viewCanvas=document.getElementById('viewCanvas');
let ctx=viewCanvas.getContext('2d');

function resizeCanvas(){viewCanvas.width=viewCanvas.clientWidth;viewCanvas.height=viewCanvas.clientHeight;}
window.addEventListener('resize',resizeCanvas);resizeCanvas();

let stars=Array.from({length:60},()=>({x:Math.random(),y:Math.random(),s:Math.random()*2}));
let particles=Array.from({length:40},()=>({x:Math.random(),y:Math.random(),s:Math.random()*2}));

function drawView(){
  const w=viewCanvas.width,h=viewCanvas.height;
  ctx.clearRect(0,0,w,h);
  if(floor>=0){
    let t=Math.min(floor/20,1);
    let skyGrad=ctx.createLinearGradient(0,0,0,h);
    skyGrad.addColorStop(0, `rgba(${100+100*t},${150+50*t},255,1)`);
    skyGrad.addColorStop(1, `rgba(10,20,${60+150*t},1)`);
    ctx.fillStyle=skyGrad;
    ctx.fillRect(0,0,w,h);
    stars.forEach(st=>{
      ctx.fillStyle=`rgba(255,255,255,${0.5+0.5*Math.random()})`;
      ctx.beginPath();
      ctx.arc(st.x*w,(st.y*h+Date.now()/2000)%h,st.s,0,Math.PI*2);
      ctx.fill();
    });
  } else {
    let t=Math.min(Math.abs(floor)/20,1);
    let earthGrad=ctx.createLinearGradient(0,0,0,h);
    earthGrad.addColorStop(0, `rgba(${50+100*t},${30+20*t},20,1)`);
    earthGrad.addColorStop(1, `rgba(20,10,5,1)`);
    ctx.fillStyle=earthGrad;
    ctx.fillRect(0,0,w,h);
    particles.forEach(p=>{
      ctx.fillStyle=`rgba(${100+100*Math.random()},${50+50*t},150,0.3)`;
      ctx.beginPath();
      ctx.arc((p.x*w+Date.now()/50)%w,(p.y*h+Date.now()/300)%h,p.s,0,Math.PI*2);
      ctx.fill();
    });
  }
}

function animate(){
  if(direction!==0){
    floor+=direction*0.02;
    if(floor>=Math.floor(floor)+1){floor=Math.floor(floor); if(generative) direction=Math.random()>.5?1:-1;}
    if(floor<=Math.ceil(floor)-1){floor=Math.ceil(floor); if(generative) direction=Math.random()>.5?1:-1;}
    floorLabel.textContent=(floor===0?'Surface':floor>0?`Sky ${Math.floor(floor)}`:`Depth ${Math.floor(floor)}`);
    currentFloor.textContent=Math.floor(floor);
    dirLabel.textContent='Direction: '+(direction===1?'Up':direction===-1?'Down':'Idle');
  }
  drawView();
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

// Controls
document.getElementById('btnUp').addEventListener('click',()=>{generative=false;direction=1;});
document.getElementById('btnDown').addEventListener('click',()=>{generative=false;direction=-1;});
document.getElementById('btnStop').addEventListener('click',()=>{generative=false;direction=0;});
document.getElementById('btnRandom').addEventListener('click',()=>{generative=true;direction=Math.random()>.5?1:-1;});

// YouTube Lofi
let player,musicPlaying=false;
function onYouTubeIframeAPIReady(){player=new YT.Player('player-anchor',{height:'0',width:'0',videoId:'jfKfPfyJRdk',playerVars:{playsinline:1,controls:0,rel:0,modestbranding:1}});}
const tag=document.createElement('script'); tag.src="https://www.youtube.com/iframe_api"; document.body.appendChild(tag);
document.getElementById('btnMusic').addEventListener('click',()=>{
  if(!player){return;}
  if(!musicPlaying){player.playVideo();musicPlaying=true;this.textContent='Pause Lofi';} 
  else{player.pauseVideo();musicPlaying=false;this.textContent='Play Lofi';}
});
</script>
</body>
</html>
